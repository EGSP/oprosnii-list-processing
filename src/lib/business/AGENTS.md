# Хранение данных

В виде файлов:

- Технические условия (ТУ)
- Исходные файлы заявок (они могут быть разных форматов)

В БД:

- Заявки (название файла - GUID, тип изделия - string, результат OCR - json,результат LLM по определению типа изделия - json, результат LLM по формированию аббревиатуры - json, дата прихода - date time, дата начала обработки - date time, дата завершения обработки - date time)

## Обработка заявок

1. Получаем заявку, задаем GUID имя файла, сохраняем в хранилище файл, записываем GUID в БД и возвращаем GUID.
2. Получаем запрос на определение типа изделия для заявки, определяем тип изделия (OCR + LLM), записываем тип изделия в БД и возвращаем тип изделия.
3. Получаем запрос на формирование аббревиатуры с аргументом используемой ТУ, определяем параметры для формирования аббревиатуры (LLM) и возвращаем список определенных параметров со значениями.

(OCR достаточно проделать единожды для файла, т.к. содержимое файла не меняется)

## REST API

Полная документация REST API доступна в [`API.md`](API.md).

### Список эндпоинтов

**Заявки (Applications):**

1. `POST /api/applications` - Загрузка файла заявки
2. `GET /api/applications` - Список заявок (с фильтрацией)
3. `GET /api/applications/:id` - Получение заявки
4. `GET /api/applications/:id/file` - Получение файла заявки
5. `POST /api/applications/:id/detect-product-type` - Определение типа изделия (⚠️ заглушка)
6. `POST /api/applications/:id/generate-abbreviation` - Формирование аббревиатуры (⚠️ заглушка)

**Технические условия (Technical Specifications):** 7. `GET /api/technical-specs` - Список ТУ 8. `GET /api/technical-specs/:id` - Получение ТУ

Примечание: Методы, требующие OCR/LLM (5, 6), пока возвращают ошибку 501 Not Implemented. Они будут реализованы после настройки внешних сервисов.

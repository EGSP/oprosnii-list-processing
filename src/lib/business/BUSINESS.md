# Бизнес-логика (Business)

Модуль содержит чистые функции для бизнес-логики приложения, не зависящие от UI и внешних сервисов.

## Структура модуля

Расположение: `src/lib/business/`

## Документация требований

Требования к обработке заявок описаны в файле [`AGENTS.md`](AGENTS.md):

### Хранение данных

- **Файлы**: Технические условия (ТУ) и исходные файлы заявок
- **БД**: Заявки с метаданными (GUID, тип изделия, результаты OCR и LLM, даты обработки)

### Процесс обработки заявок

1. **Создание заявки**: Получаем заявку, задаем GUID имя файла, сохраняем в хранилище файл, записываем GUID в БД и возвращаем GUID.

2. **Определение типа изделия**: Получаем запрос на определение типа изделия для заявки, определяем тип изделия (OCR + LLM), записываем тип изделия в БД и возвращаем тип изделия.

3. **Формирование аббревиатуры**: Получаем запрос на формирование аббревиатуры с аргументом используемой ТУ, определяем параметры для формирования аббревиатуры (LLM) и возвращаем список определенных параметров со значениями.

**Важно**: OCR достаточно проделать единожды для файла, т.к. содержимое файла не меняется.

## Статус разработки

Модуль находится в разработке. Планируемые функции:

- Извлечение текста из файлов (OCR для изображений и PDF)
- Определение типа изделия через LLM
- Извлечение параметров для формирования аббревиатуры через LLM
- Формирование аббревиатуры по шаблону из ТУ

## Интеграция с хранилищем

Модуль бизнес-логики использует модуль хранилища (`../storage/`) для сохранения и получения данных:

- Работа с заявками через репозиторий
- Сохранение и чтение файлов заявок
- Получение технических условий

Подробнее см. [`../storage/STORAGE.md`](../storage/STORAGE.md)

